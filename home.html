<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>NormandX</title>
<link rel="stylesheet" href="style.css">
</head>

<body>

<header>
  <div class="logo" onclick="location.href='home.html'">
    <span>Normand</span><span>X</span>
  </div>
  <input class="search" placeholder="Rechercher..." oninput="search(this.value)">
  <div class="account" onclick="toggleMenu()">
    <img src="account.png">
  </div>
</header>

<div class="menu" id="menu">
  <a href="account.html">Compte</a>
  <a href="favorites.html">Favoris</a>
  <a href="history.html">Historique</a>
  <a onclick="logout()">Déconnexion</a>
</div>

<div class="layout">
<aside id="categories">
  <a onclick="filter('Hetero')">Hétéro</a>
  <a onclick="filter('MILF')">MILF</a>
  <a onclick="filter('Teen')">Teen</a>
  <a onclick="filter('Anal')">Anal</a>
  <a onclick="filter('Lesbian')">Lesbian</a>
  <a onclick="filter('Gays')">Gays</a>
  <a onclick="filter('Amateur')">Amateur</a>
  <a onclick="filter('Asian')">Asian</a>
  <a onclick="filter('BBW')">BBW</a>
  <a onclick="filter('Fetish')">Fetish</a>
  <a onclick="filter('Hardcore')">Hardcore</a>
  <a onclick="filter('Compilation')">Compilation</a>
</aside>

<main>
  <div class="grid" id="grid"></div>
</main>
</div>

<script>
/* ===== AUTH ===== */
const user = localStorage.getItem("connected");
if(!user) location.href="auth.html";

function toggleMenu(){
  menu.style.display = menu.style.display==="block"?"none":"block";
}
function logout(){
  localStorage.removeItem("connected");
  location.href="auth.html";
}

/* ===== VIDEOS ===== */
const videos = [
 {
  id:1,
  t:"Carla Cute 1",
  c:"Hetero",
  poster:"thumbs/1.jpg",
  v:"https://ia601703.us.archive.org/22/items/video-1_20260114/Video1.mp4",
  d:"12:34",
  views:0
 },
 {
  id:2,
  t:"Ma cousine m'a fait perdre le NNN",
  c:"Hetero",
  poster:"https://ic-nss.flixcdn.com/a/MzliYTZhMDJhMWU2ZjNkNjY4NGRmOGI3NTI1MjQ1Zjg/webp%2Cs%28w%3A704%2Ch%3A440%29/xc/7k/7k6BvI/frame/original/23.jpg",
  v:"https://ia601402.us.archive.org/0/items/xnxx-incroyable-blonde-bien-roulee-percee-par-filoufitt-360p/XNXX_incroyable_blonde_bien_roulee_percee_par_filoufitt_360p.mp4",
  d:"18:05",
  views:0
 }
];

/* ===== RENDER ===== */
const grid = document.getElementById("grid");

function render(list){
  grid.innerHTML = "";
  list.forEach(v=>{
    const card = document.createElement("div");
    card.className = "card";
    card.onclick = ()=>openVideo(v.id);

    card.innerHTML = `
    <div style="position:relative;width:100%;aspect-ratio:16/9;background:#000;overflow:hidden;border-radius:12px">
      <img src="${v.poster}"
        style="position:absolute;width:100%;height:100%;object-fit:cover;z-index:2">
      <video muted playsinline preload="none"
        style="position:absolute;width:100%;height:100%;object-fit:cover;z-index:1"></video>
      <span style="position:absolute;right:8px;bottom:6px;background:#000;color:#fff;padding:2px 6px;border-radius:6px;font-size:12px;z-index:3">${v.d}</span>
    </div>
    <p>${v.t}</p>
    <div class="meta">
      <span>${v.views} vues</span>
      <span>${v.c}</span>
    </div>
    `;

    const img = card.querySelector("img");
    const video = card.querySelector("video");

    card.addEventListener("mouseenter",()=>{
      video.src = v.v;
      video.load();
      video.currentTime = 0.1;
      video.play();
      img.style.display="none";
    });

    card.addEventListener("mouseleave",()=>{
      video.pause();
      video.removeAttribute("src");
      video.load();
      img.style.display="block";
    });

    grid.appendChild(card);
  });
}

render(videos);

/* ===== SEARCH / FILTER ===== */
function search(q){
  render(videos.filter(v=>v.t.toLowerCase().includes(q.toLowerCase())));
}
function filter(c){
  render(videos.filter(v=>v.c===c));
}

/* ===== OPEN VIDEO ===== */
function openVideo(id){
  location.href = "video.html?id="+id;
}
</script>

</body>
</html>
