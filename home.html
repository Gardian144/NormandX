<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>NormandX</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" href="style.css">
</head>
<body>

<header>
  <div class="logo" onclick="location.href='home.html'">
    <span>Normand</span><span>X</span>
  </div>

  <input class="search" placeholder="Rechercher..." oninput="search(this.value)">

  <div class="account" onclick="toggleMenu()">üë§</div>
</header>

<div class="menu" id="menu">
  <a href="#">Compte</a>
  <a href="#">Favoris</a>
  <a href="#">Historique</a>
  <a onclick="logout()">D√©connexion</a>
</div>

<div class="layout">
<aside>
  <a onclick="filter('Hetero')">H√©t√©ro</a>
  <a onclick="filter('MILF')">MILF</a>
</aside>

<main>
  <div class="grid" id="grid"></div>
</main>
</div>

<script>
/* ===== AUTH ===== */
const user = localStorage.getItem("connected") || "demo";
localStorage.setItem("connected", user);

/* ===== MENU ===== */
function toggleMenu(){
  const m=document.getElementById("menu");
  m.style.display = m.style.display==="block"?"none":"block";
}
function logout(){
  localStorage.clear();
  location.reload();
}

/* ===== VIDEOS (SOURCE UNIQUE) ===== */
const videos = [
 {
  id:1,
  t:"Carla Cute 1",
  c:"Hetero",
  poster:"thumbs/1.jpg",
  v:"https://ia601703.us.archive.org/22/items/video-1_20260114/Video1.mp4",
  d:"12:34",
  views:0
 },
 {
  id:2,
  t:"Ma cousine m'a fait perdre le NNN",
  c:"Hetero",
  poster:"thumbs/2.jpg",
  v:"https://ia601402.us.archive.org/0/items/xnxx-incroyable-blonde-bien-roulee-percee-par-filoufitt-360p/XNXX_incroyable_blonde_bien_roulee_percee_par_filoufitt_360p.mp4",
  d:"18:05",
  views:0
 }
];

localStorage.setItem("videos", JSON.stringify(videos));

/* ===== STATE ===== */
let allVideos = videos;
let likes = JSON.parse(localStorage.getItem("likes")||"[]");
let favs  = JSON.parse(localStorage.getItem("favs")||"[]");

/* ===== RENDER ===== */
function render(list){
  grid.innerHTML="";
  list.forEach(v=>{
    grid.innerHTML+=`
    <div class="card">
      <div class="thumb"
        onmouseenter="preview(this)"
        onmouseleave="stopPreview(this)"
        ontouchstart="preview(this)"
        ontouchend="stopPreview(this)">
        <img src="${v.poster}">
        <video muted playsinline>
          <source src="${v.v}" type="video/mp4">
        </video>
        <span class="duration">${v.d}</span>
      </div>

      <p>${v.t}</p>

      <div class="actions">
        <button class="like ${likes.includes(v.id)?'active':''}"
          onclick="like(${v.id},this)">üëç</button>
        <button class="fav ${favs.includes(v.id)?'active':''}"
          onclick="fav(${v.id},this)">‚ù§</button>
      </div>
    </div>`;
  });
}
render(allVideos);

/* ===== PREVIEW ===== */
let timer;
function preview(el){
  timer=setTimeout(()=>{
    const v=el.querySelector("video");
    el.classList.add("preview");
    v.currentTime=0;
    v.play();
  },300);
}
function stopPreview(el){
  clearTimeout(timer);
  const v=el.querySelector("video");
  el.classList.remove("preview");
  v.pause(); v.currentTime=0;
}

/* ===== LIKE / FAV ===== */
function like(id,btn){
  likes.includes(id)?likes=likes.filter(x=>x!==id):likes.push(id);
  btn.classList.toggle("active");
  localStorage.setItem("likes",JSON.stringify(likes));
}
function fav(id,btn){
  favs.includes(id)?favs=favs.filter(x=>x!==id):favs.push(id);
  btn.classList.toggle("active");
  localStorage.setItem("favs",JSON.stringify(favs));
}

/* ===== FILTER ===== */
function filter(c){
  render(allVideos.filter(v=>v.c===c));
}
function search(q){
  render(allVideos.filter(v=>v.t.toLowerCase().includes(q.toLowerCase())));
}
</script>

</body>
</html>
